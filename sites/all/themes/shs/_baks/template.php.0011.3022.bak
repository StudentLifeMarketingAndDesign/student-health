<?php
function trim_text($text, $limit) {
  $extra = "<p>...</p>";
  preg_match_all('/(\S+\s+)/',strip_tags($text),$matches);
  if ($limit < count($matches[0])) {
    return rtrim(implode('',array_slice($matches[0],0,$limit))) . $extra;
  } else {
    return $text;
  }
}
?>